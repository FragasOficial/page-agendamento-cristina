<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda Certa</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="index.css">
    <script src="./index.js" defer></script>
</head>
<body class="config-all">
    <header id="config-h1">
        <img src="./img/logo.jpeg" alt="logo-Cristina-Unha-de-flor">
        <h1>Ana Cristina Unha de Flor</h1>
        <img src="./img/logo.jpeg" alt="logo-Cristina-Unha-de-flor">
    </header>

    <h2 class="config-header02">AGENDA CERTA</h2>
    <div class="config-div01">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. 
           Commodi voluptates velit est enim, voluptate ducimus? 
           Voluptate nobis neque suscipit tempora provident blanditiis 
           veniam aspernatur fugiat doloribus iusto, error obcaecati nemo!
        </p>
    </div>

    <h2 class="config-header02">AGENDE SEU ATENDIMENTO CONOSCO:</h2>
    <div class="box-agendamento">
        <form class="config-table" id="agendamentoForm">
            <div class="config-date">
                <p>Escolha a data do seu atendimento:</p>
                <label for="festa">Escolha a sua data preferida:</label>
                <input type="date" id="festa" name="festa" min="2024-04-01" max="2024-12-31" required />
            </div>
            
            <div id="scheduleContainer" class="dimension-card-horario" style="display:none;">
                <!-- Horário de atendimento será inserido dinamicamente aqui -->
            </div>
            <div class="personal-info">
                <p>Informe seus dados:</p>
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" required />
                <label for="telefone">Telefone:</label>
                <input type="tel" id="telefone" name="telefone" required />
                <label for="endereco">Endereço:</label>
                <input type="text" id="endereco" name="endereco" required />
                <label for="email">E-mail:</label>
                <input type="email" id="email" name="email" required />
            </div>
            <div class="botton-enviar">
              <button type="button" id="submitBtn" style="display:none;">Agendar agora</button>
          </div>
        </form>
    </div>

    <div id="result"></div> <!-- Div para exibir os resultados -->
    <div id="paymentSection" style="display:none;">
        <h3>Pagamento</h3>
        <p>Escolha sua forma de pagamento:</p>
        <button id="pixBtn">Pix</button>
        <button id="creditCardBtn">Cartão de Crédito</button>
    </div>
    <script>
        document.getElementById('festa').addEventListener('change', function() {
    var selectedDate = new Date(this.value);
    var dayOfWeek = selectedDate.getDay();
    var isHoliday = checkIfHoliday(selectedDate);

    var scheduleContainer = document.getElementById('scheduleContainer');
    scheduleContainer.innerHTML = ''; // Limpa qualquer conteúdo anterior

    if (dayOfWeek >= 1 && dayOfWeek <= 5 && !isHoliday) {
        scheduleContainer.innerHTML = `
            <label for="hora-cons">Escolha o horário do seu atendimento (aberto das 18:30 às 21:00):</label>
            <input id="hora-cons" type="time" name="hora-cons" min="18:30" max="21:00" required />
        `;
    } else if (dayOfWeek === 6) {
        scheduleContainer.innerHTML = `
            <p class="config-title-paragraph">Horários de fim de semana (Sábado):</p>
            <label for="hora-cons-sabado">Escolha o horário do seu atendimento (aberto das 08:30 às 16:00):</label>
            <input id="hora-cons-sabado" type="time" name="hora-cons-sabado" min="08:30" max="16:00" required />
        `;
    } else if (dayOfWeek === 0) {
        scheduleContainer.innerHTML = `
            <p class="config-title-paragraph">Horários do domingo:</p>
            <label for="hora-cons-domingo">Escolha o horário do seu atendimento (aberto das 08:30 às 10:00):</label>
            <input id="hora-cons-domingo" type="time" name="hora-cons-domingo" min="08:30" max="10:00" required />
        `;
    } else if (isHoliday) {
        scheduleContainer.innerHTML = `
            <p class="config-title-paragraph">Horários de feriado:</p>
            <label for="hora-cons-feriado">Escolha o horário do seu atendimento (aberto das 08:30 às 17:00):</label>
            <input id="hora-cons-feriado" type="time" name="hora-cons-feriado" min="08:30" max="17:00" required />
        `;
    }

    scheduleContainer.style.display = 'block';
    document.getElementById('submitBtn').style.display = 'block';
});

function checkIfHoliday(date) {
    var holidays = ['2024-04-21', '2024-05-01', '2024-09-07']; // Exemplo de feriados
    return holidays.includes(date.toISOString().split('T')[0]);
}

document.getElementById('submitBtn').addEventListener('click', function() {
    var nome = document.getElementById('nome').value;
    var telefone = document.getElementById('telefone').value;
    var endereco = document.getElementById('endereco').value;
    var email = document.getElementById('email').value;
    var date = document.getElementById('festa').value;
    var timeWeekday = document.getElementById('hora-cons') ? document.getElementById('hora-cons').value : '';
    var timeSaturday = document.getElementById('hora-cons-sabado') ? document.getElementById('hora-cons-sabado').value : '';
    var timeSunday = document.getElementById('hora-cons-domingo') ? document.getElementById('hora-cons-domingo').value : '';
    var timeHoliday = document.getElementById('hora-cons-feriado') ? document.getElementById('hora-cons-feriado').value : '';

    var resultDiv = document.getElementById('result');
    resultDiv.innerHTML = ''; // Limpa qualquer conteúdo anterior

    var resultContent = `
        <h3>Resumo do Agendamento</h3>
        <p><strong>Nome:</strong> ${nome}</p>
        <p><strong>Telefone:</strong> ${telefone}</p>
        <p><strong>Endereço:</strong> ${endereco}</p>
        <p><strong>E-mail:</strong> ${email}</p>
        <p><strong>Data escolhida:</strong> ${date}</p>
    `;
    if (timeWeekday) resultContent += `<p><strong>Horário de atendimento (Semana):</strong> ${timeWeekday}</p>`;
    if (timeSaturday) resultContent += `<p><strong>Horário de atendimento (Sábado):</strong> ${timeSaturday}</p>`;
    if (timeSunday) resultContent += `<p><strong>Horário de atendimento (Domingo):</strong> ${timeSunday}</p>`;
    if (timeHoliday) resultContent += `<p><strong>Horário de atendimento (Feriado):</strong> ${timeHoliday}</p>`;

    resultContent += `<button id="confirmBtn">Confirmar Dados</button>`;
    resultContent += `<button id="editBtn">Editar Dados</button>`;
    resultDiv.innerHTML = resultContent;

    document.getElementById('confirmBtn').addEventListener('click', function() {
        showPaymentOptions();
    });

    document.getElementById('editBtn').addEventListener('click', function() {
        resultDiv.innerHTML = ''; // Limpa o resultado para permitir edição
        document.getElementById('scheduleContainer').style.display = 'block';
        document.getElementById('submitBtn').style.display = 'block';
    });
});

function showPaymentOptions() {
    var paymentSection = document.getElementById('paymentSection');
    paymentSection.style.display = 'block';

    document.getElementById('pixBtn').addEventListener('click', function() {
        alert("Pagamento via Pix ainda não implementado.");
        finalizeTransaction();
    });

    document.getElementById('creditCardBtn').addEventListener('click', function() {
        alert("Pagamento via Cartão de Crédito ainda não implementado.");
        finalizeTransaction();
    });
}

function finalizeTransaction() {
    var resultDiv = document.getElementById('result');
    var paymentSection = document.getElementById('paymentSection');
    resultDiv.innerHTML += `<p>Pagamento efetuado com sucesso!</p>`;
    paymentSection.style.display = 'none';

    printReceipt();
}

function printReceipt() {
    var printContent = document.getElementById('result').innerHTML;
    var originalContent = document.body.innerHTML;

    document.body.innerHTML = printContent;
    window.print();
    document.body.innerHTML = originalContent;
}

function shareReceipt() {
    if (navigator.share) {
        var printContent = document.getElementById('result').textContent;
        navigator.share({
            title: 'Comprovante de Agendamento',
            text: printContent,
        }).then(() => {
            console.log('Compartilhamento bem-sucedido.');
        }).catch((error) => {
            console.error('Erro ao compartilhar:', error);
        });
    } else {
        alert('Compartilhamento não suportado neste dispositivo.');
    }
}

    </script>
    <footer class="config-footer">
        <p>@Ana Cristina Unha de Flor. Todos os direitos reservados.</p>
    </footer>
</body>
</html>
